type: Test
spec:
  id: apdCx-h4g
  name: Keptn Test / Pokeshop - List Pokemons
  description: List Pokemons in API and check if it respects a SLO
  trigger:
    type: http
    httpRequest:
      url: http://demo-pokemon-api.demo/pokemon?take=20&skip=0
      method: GET
      headers:
      - key: Content-Type
        value: application/json
  specs:
  - selector: span[tracetest.span.type="general" name="Tracetest trigger"]
    assertions: # checks SLO
    - attr:tracetest.span.duration < 500ms
  - selector: span[tracetest.span.type="http" name="GET /pokemon?take=20&skip=0" http.method="GET"]
    assertions: # checks if API gave a valid response
    - attr:http.status_code = 200
    - attr:http.response.body contains '"id":1'
